<html>
<style>
    body {
        font-family: monospace;
    }
    div {
        padding: 0 0 5px 0;
    }
</style>
<script src="http://adodson.com/hello.js/dist/hello.all.min.js"></script>
<script src="/nanojax.min.js"></script>
<script>
    hello.init({
        facebook: 1401271990193674
        //google: GOOGLE_CLIENT_ID
    });

    hello.on('auth.login', function(auth) {

        // Call user information, for the given network
        hello(auth.network).api('/me').then(function(r) {
            // Inject it into the container
            nanoajax.ajax({url: '/api/auth/verify-facebook', method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify({
                user: r,
                auth: {authResponse: {accessToken: auth.authResponse.access_token}}
            })}, function (code, responseText, request) {
                if (code === 200) {
                    location.reload();
                }
            })
        });
    });

    function kipLogin() {
        nanoajax.ajax({url: '/api/auth/login', method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify({
            email: document.getElementById('email').value,
            password: document.getElementById('password').value
        })}, function (code, responseText, request) {
            if (code === 200) {
                location.reload();
            }
        });

        return false;
    }
</script>
<div>
    plz log in to kip
</div>
<form onsubmit="return kipLogin()">
    <input id="email" name="email" placeholder="email" type="email">
    <input id = "password" name="password" placeholder="password" type="password">
    <input type="submit" value="log in">
</form>
<div>
    or
</div>
<div>
    <button onclick="hello('facebook').login()">facebook</button>
</div>
<div id="profile"></div>
</html>