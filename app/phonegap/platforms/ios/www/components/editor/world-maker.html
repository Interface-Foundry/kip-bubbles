<div class="navfix editorbg">

<div class="toolbar">
	<button type="button" class="btn btn-success" ng-click="prevPage()" ng-hide="pageIndex==0">
	  <span class="glyphicon glyphicon-chevron-left"></span>
	</button>
	{{pageIndex+1}}/3
	<button type="button" class="btn btn-success" ng-click="nextPage()" ng-hide="pageIndex==2">
	  <span class="glyphicon glyphicon-chevron-right"></span>
	</button>
	<button type="button" class="btn btn-primary" ng-hide="pageIndex!=2" ng-click="buildOut()">Build your World</button>
</div>

	<ul id="maker-pages">
		<li ng-class="pageClass[0]" class="container"> 
		<form name="worldDetail" ng-submit="submitForm()" id="worldDetail" novalidate>
			<legend>Create your World</legend>
				<div class="map-holder">
					<leaflet id="worldDetailMap" tiles="tiles" center="center" markers="markers" paths="paths">
								 
					</leaflet>
					<div class="input-group locsearch">
						<input name="locsearchbar" type="text" class="form-control" ng-model="locsearchbar" ng-keypress="maplocsearch($event)"/>
						<span class="input-group-btn">
							<button class="btn btn-default" type="button" ng-click="maplocsearch($event)">Search</button>
						</span>
					</div>
				</div>
			<div class="row">
				<div class="col-xs-6">
					<div class="field">
						<label>Name</label> <input name="worldName" type="text" ng-model="world.name" required />
						<div class="error" ng-show="worldDetail.worldName.$dirty && worldDetail.worldName.$error.required">Name is required.</div>
					</div>

					<div class="field">
						<label>Picture</label> 
								
						<span class="btn btn-success fileinput-button">
				        	<i class="icon-plus icon-white"></i>
							<span>Add Profile Pic</span>
							<input id="fileupload" type="file" name="files[]">
						</span>
						
						<label>Or Drag & Drop Pic â†‘</label>
				
						<div id="progress" class="progress">
							<div class="bar" style="width: 0%;"></div>
						</div>
				
						<p id="uploadedpic"></p>
						<div id="preview"></div>         

					</div>
					<div class="field">
						<label>Summary</label> <input name="worldSummary" type="text" ng-model="world.summary" required/>
						<div class="error" ng-show="worldDetail.worldSummary.$dirty && worldDetail.worldSummary.$error.required">
						A summary is required!
						</div>
					</div>
					<div class="field">
						<label>Description</label> <input name="worldDescription" type="text" ng-model="world.description" required/>
						<div class="error" ng-show="worldDetail.worldDescription.$dirty && worldDetail.worldDescription.$error.required">
						A description is required! 
						</div>
					</div>
					<div class="field">
						<label>Hashtag</label> <input name="worldHashtag" type="text" ng-model="world.hashtag" required/>
						<div class="error" ng-show="worldDetail.worldHashtag.$dirty && worldDetail.worldHashtag.$error.required">
						A hashtag is required!
						</div>
					</div>
					<div class="field">
						<label>Category</label> <input name="worldCategory" type="text" ng-model="world.category" required/>
						<div class="error" ng-show="worldDetail.worldCategory.$dirty && worldDetail.worldCategory.$error.required">
						A category is required
						</div>
					</div>
					<div class="field">
						<label>Landmark Categories</label> 
						<div class="input-group">
						<input name="landmarkCategory" ng-model="tempLandmarkCategory" type="text" class="form-control">
						<span class="input-group-btn">
							<button class="btn btn-default" type="button" ng-click="addLandmarkCategory()">Add</button>
						</span>
						</div>
						<ul>
							<li ng-repeat="landmarkCategory in world.landmarkCategories" class="clearfix">
							{{landmarkCategory.name}} <button type="button" class="close" ng-click="removeLandmarkCategory($index)"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
							</li>
						</ul>
					</div>
				</div>
				<div class="col-xs-6">
					<div class="field">
						<button ng-click="mapLock()" class="btn btn-primary">Redraw Border</button><span class="mappos">{{markers.m.lat}},{{markers.m.lng}}</span>
					</div>
					<div class="field">
						<button ng-click="showTime=!showTime" class="btn btn-primary">Enable Time</button>
					</div>

					<span ng-show="showTime">
					   <h4>Start Date</h4>
					    <div class="row">
					        <div class="col-md-6">
					            <p class="input-group">
					              <input type="text" ng-click="open($event)" class="form-control" datepicker-popup="{{format}}" ng-model="world.date.start" is-open="opened" close-text="Close" />
					              <span class="input-group-btn">
					                <button type="button" class="btn btn-default" ng-click="open($event)"><i class="glyphicon glyphicon-calendar"></i></button>
					              </span>
					            </p>
					        </div>
					    </div>


					   <h4>Start Time</h4>
					   <timepicker ng-model="world.time.start" hour-step="hstep" minute-step="mstep" show-meridian="ismeridian"></timepicker>
					

					    <h4>End Time</h4>
					    <timepicker ng-model="world.time.end" hour-step="hstep" minute-step="mstep" show-meridian="ismeridian"></timepicker>
					
					    <!-- LOCATION OF MAP BUILDER -->

	                      <h4><a ng-click="showEndDateDetails = ! showEndDateDetails ; addEndDate()">Add End Date?</a></h4>

	                     	<span ng-show="showEndDateDetails">
						 		 <hr>

								   <h4>End Date</h4>
								    <div class="row">
								        <div class="col-md-6">
								            <p class="input-group">
								              <input type="text" ng-click="open($event)" class="form-control" datepicker-popup="{{format}}" ng-model="world.date.end" is-open="opened" close-text="Close">
								              <span class="input-group-btn">
								                <button type="button" class="btn btn-default" ng-click="open($event)"><i class="glyphicon glyphicon-calendar"></i></button>
								              </span>
								            </p>
								        </div>
								    </div> 
							</span> 

					</span>
				</div>
			</div>
		</form>
		</li>
				
		<li ng-class="pageClass[1]" class="container">
		<form name="mapStyle" novalidate>
			<legend>Style your Map</legend>
				<div class="row">
					<div class="col-xs-8">		
						
						<div class="mapbox field">
							<div class="row">
								<a ng-click='mapping.mapThemeSelect=mapThemes[0]'><div class='col-xs-6'><img class="col-xs-12 img-responsive" ng-src="/img/mapbox/urban_small.png" ng-class="{selectOutline: mapping.mapThemeSelect == mapThemes[0]}"/>urban</div></a>
								<a ng-click='mapping.mapThemeSelect=mapThemes[1]'><div class='col-xs-6'><img class="col-xs-12 img-responsive" ng-src="/img/mapbox/fairy_small.png" ng-class="{selectOutline: mapping.mapThemeSelect == mapThemes[1]}"/>fairy</div></a>
								<a ng-click='mapping.mapThemeSelect=mapThemes[2]'><div class='col-xs-6'><img class="col-xs-12 img-responsive" ng-src="/img/mapbox/sunset_small.png" ng-class="{selectOutline: mapping.mapThemeSelect == mapThemes[2]}"/>sunset</div></a>
								<a ng-click='mapping.mapThemeSelect=mapThemes[3]'><div class='col-xs-6'><img class="col-xs-12 img-responsive" ng-src="/img/mapbox/arabesque_small.png" ng-class="{selectOutline: mapping.mapThemeSelect == mapThemes[3]}"/>arabesque</div></a>
							</div>
							<div class="row">
								<div class='col-xs-4'>
									<select ng-model="mapping.mapThemeSelect" ng-options="mapTheme.cloudMapName for mapTheme in mapThemes" class='form-control'></select>
								</div>
							</div>
						</div>
						<div class='field'>
							<div class='row'>
								<div class='col-xs-1'><a ng-click="mapping.markerSelect = markerOptions[0]"><img class="marker-img" ng-src='/img/marker/red-marker.png' ng-class="{selectOutline: mapping.markerSelect==markerOptions[0]}"/></a></div>
								<div class='col-xs-1'><a ng-click="mapping.markerSelect = markerOptions[1]"><img class="marker-img" ng-src='/img/marker/orange-marker.png' ng-class="{selectOutline: mapping.markerSelect==markerOptions[1]}"/></a></div>
								<div class='col-xs-1'><a ng-click="mapping.markerSelect = markerOptions[2]"><img class="marker-img" ng-src='/img/marker/yellow-marker.png' ng-class="{selectOutline: mapping.markerSelect==markerOptions[2]}"/></a></div>
								<div class='col-xs-1'><a ng-click="mapping.markerSelect = markerOptions[3]"><img class="marker-img" ng-src='/img/marker/green-marker.png' ng-class="{selectOutline: mapping.markerSelect==markerOptions[3]}"/></a></div>
								<div class='col-xs-1'><a ng-click="mapping.markerSelect = markerOptions[4]"><img class="marker-img" ng-src='/img/marker/blue-marker-old.png' ng-class="{selectOutline: mapping.markerSelect==markerOptions[4]}"/></a></div>
								<div class='col-xs-1'><a ng-click="mapping.markerSelect = markerOptions[5]"><img class="marker-img" ng-src='/img/marker/purple-marker.png' ng-class="{selectOutline: mapping.markerSelect==markerOptions[5]}"/></a></div>
								<div class='col-xs-7'>
									<select ng-model="mapping.markerSelect" ng-options="markerOption.name for markerOption in markerOptions" class='form-control'></select>
								</div>
							</div>
						</div>


					<br>
				

					<!-- maps display type selector -->
					<div class="field">
						<h4> Upload your own map (like a floor plan)</h4>
						<div class="row">
							<h4>How your maps will be displayed: {{mapBuild}}</h4>
							<input type="radio" ng-model="mapping.type" value="cloud"> Only Cloud Map:: {{mapping.mapThemeSelect.cloudMapName}} <br/>
							<input type="radio" ng-model="mapping.type" value="local"> Only Local Map <br/>
							<input type="radio" ng-model="mapping.type" value="both"> Both Maps (layered)<br/>
						</div>
					</div>

					<div class="map_uploader" ng-hide="pageIndex==2" style="position:relative;">
						<div class="map_panel">
							  	<leaflet id="modalMap" center="center" layers="layers" height="550px" width="1000px"></leaflet>
						</div>

						<div ng-hide="hideMapOptions" id="map_uploader">	
							<span class="btn btn-success btn-lg fileinput-button">
						    <i class="icon-plus icon-white"></i>
								<span>Select Image</span>
								<input id="fileuploadmap" type="file" name="files[]">
							</span>

							<p class="recommended">Recommended Size: 3000px x 1000px .png or .jpg</p>
						</div>

						<!--Temporary to show map building -->
						<div ng-show="showMapBuilding" id="map_building">	
							<h4 style="font-size:52px;">Building Map...might take a while</h4>
							<h5>The map will build in the background</h5>
						</div>

						<!-- Temporary to show map built -->
						<div ng-show="showMapBuilt" id="map_built">	
							<h4 style="font-size:52px;">Map Built!</h4>
						</div>

							
						<!-- HIDDEN IMAGE PREVIEW -->
						<div id="uploaded_map" class="ng-hide"></div>
						<div id="preview_map"></div>   

						<button ng-show="hideMapOptions" ng-click="buildMap()" class="btn btn-primary buildmap">Build Map</button>

						
					</div>
					</div>
				</div>
		</form>
		</li>
		
		<li ng-class="pageClass[2]" class="container">
		<form name="explorerStyle" novalidate>
			<legend>Style your Explorer</legend>
			<h4>Theme Defaults from <em ng-cloak>{{styles.name}}</em></h4>
			<div class="row">
				<div class="col-xs-4">
					<div class="field">
						<label>Navigator Background</label> <input name="navBG" type='text' class='color' value='#FFFFFF' ng-model='styles.navBG_color'/>
					</div>
					<div class="field">
						<label>Body Background</label> <input name="bodyBG" type='text' class='color' value='#E6E6E6' ng-model='styles.bodyBG_color'/>
					</div>
					<div class="field">
						<label>Title Background</label> <input name="titleBG" type='text' class='color' value='#E6E6E6' ng-model='styles.titleBG_color'/>
					</div>
					<div class="field">
						<label>Card BG</label> <input name="cardBG" type='text' class='color' value='#FFFFFF' ng-model='styles.cardBG_color' disabled/>
					</div>
					<!--<div class="field">
						<label>Card Border</label> <input name="cardBorder" type='text' class='color' value='#808080' ng-model='styles.cardBorder_color'/> 
					</div>-->
					<!--<div class="field">
					<label>World Title Color</label> <input name="worldTitle" type='text' class="color" value='#808080' ng-model='styles.worldTitle_color'/>
					</div>-->
					<div class="field">
						<label>Landmark Title Color</label> <input name="landmarkTitle" type='text' class="color" value='#808080' ng-model='styles.landmarkTitle_color'/>
					</div>
					<div class="field">
						<label>Category Title Color</label> <input name="categoryTitle" type='text' class="color" value='#808080' ng-model='styles.categoryTitle_color'/>
					</div>
					<!--<div class="field">
						<label>Accent Text Color</label> <input name="accent" type='text' class="color" value='#808080' ng-model='styles.accent_color'/>
					</div>-->
					<!--<div class="field">
						<label>Body Font</label> <select></select>
					</div>-->
					<!--<div class="field">
						<label>Theme Font</label> <select disabled></select>
					</div>-->
					<div class="field">
						<div class="row">
						<div class="col-xs-6 widgetCheck">
							<input type="checkbox" name="twitter" id="twitter" ng-model="styles.widgets.twitter" ng-init="styles.widgets.twitter=false">
							<label for="twitter">Twitter</label>
						</div>
						<div class="col-xs-6 widgetCheck">
							<input type="checkbox" name="instagram" id="instagram" ng-model="styles.widgets.instagram" ng-init="styles.widgets.instagram=false">
							<label for="instagram">Instagram</label>
						</div>
						<div class="col-xs-6 widgetCheck">
							<input type="checkbox" name="upcoming" id="upcoming" ng-model="styles.widgets.upcoming" ng-init="styles.widgets.upcoming=false">
							<label for="upcoming">Upcoming</label>
						</div>
						<div class="col-xs-6 widgetCheck">
							<input type="checkbox" name="categorySwitch" id="categorySwitch" ng-model="styles.widgets.category" ng-init="styles.widgets.category=false">
							<label for="categorySwitch">Categories</label>
						</div>
						<div class="col-xs-12" ng-show="styles.widgets.twitter || styles.widgets.instagram">
						Current Tag: {{world.hashtag}}
						</div>
						</div>
					</div>
				</div>
				<div class="col-xs-6">
					<div class="livepreview" ng-style="{'background-color':styles.bodyBG_color}">
						<div class="container">
							<div class="row">
								<div ng-style="{'background-color': styles.titleBG_color}" class="col-xs-12">
									<h1 ng-style="{'color': styles.worldTitle_color}">World Title Color</h1>
								</div>
									<h4 class='category-heading' ng-style="{'color': styles.categoryTitle_color}">Category Title Color</h4>
								<div  class="col-xs-12 landmark">
									<div class="media card" ng-style="{'background-color': styles.cardBG_color}">
										<img ng-src="img/tidepools/default.jpg" class="avatar media-object pull-left vertical-middle" ng-cloak>
										<div class="media-body">
											<h3 class="media-heading" ng-style="{color: styles.landmarkTitle_color}" ng-cloak>Landmark Name</h3>
											<em>Landmark Summary</em>
										</div>
									</div>
									
							</div>
						</div>
					</div>
				</div>
			</div>
			
		</form>
		
		</li>
	</ul>
		
</div>

</div>


<!-- Map Uploader Window -->
<style>

	#map_options{
		width: 400px;
	}

	.buildmap{
		position: absolute;
		top: 813px;
		left: 916px;
	}

	#map_uploader{
		background: rgba(255,255,255,0.6);
		height: 400px;
		text-align: center;
		position: absolute;
		top:0px;
		z-index: 4000;
		height: 565px;
		width: 1000px;		
		margin: 0 auto;
	}

	#map_building{
		background: rgba(255,255,255,0.6);
		height: 400px;
		text-align: center;
		position: absolute;
		top:880px;
		z-index: 4000;
		height: 565px;
		width: 1000px;		
		margin: 0 auto;
	}

	#map_built{
		background: rgba(255,255,255,0.6);
		height: 400px;
		text-align: center;
		position: absolute;
		top:880px;
		z-index: 4000;
		height: 565px;
		width: 1000px;		
		margin: 0 auto;
	}

	#map_modal .upload_panel{
		background: rgba(255,255,255,0.6);
		text-align: center;
		position: absolute;
		top:61px;
		z-index: 4000;
		height: 450px;
		width: 100%;
	}
	#map_modal .upload_panel .fileinput-button{
		margin-top: 20%;
		margin-bottom: 20px;
	}
	#map_modal .ng-modal-dialog{
		top: 40%;
		padding: 0;
	}
	#map_modal .ng-modal-title{
		padding: 10px;
		margin: 0;
	}
	#preview_map{
		position: absolute;
		top: 400000000px;
		left: 400000000px;
		z-index: 0;
	}
	#map_modal #modalMap{
	}
	#map_modal .map_panel .done-button{
		position: absolute;
		bottom: 20px;
		right: 20px;
		z-index: 4001;
	}

	.leaflet-control-zoom-in{
		background-color: white;
	}

	.leaflet-control-zoom-out{
		background-color: white;
	}

</style>